/**
 * styles.css — JS Variables & Scope
 *
 * Layout (desktop):
 *  ┌─ header [☰ title] ──────────────────────────────────────────────────────┐
 *  ├─ #app ──────────────────────────────────────────────────────────────────┤
 *  │  ┌─ #sidebar ──────┬─ #main ─────────────────────────────────────────┐ │
 *  │  │ 01 VAR...       │  #breadcrumb      section › Demo X / Y          │ │
 *  │  │   1. item       │  #editor-toolbar  [▶ Run] [↺ Reset]  hint       │ │
 *  │  │   2. item       │  #editor-container  (Monaco — editable)         │ │
 *  │  │ ────────────    │  #output-panel    ▶ OUTPUT / ✗ ERROR            │ │
 *  │  │ 02 LET...       └─────────────────────────────────────────────────┘ │
 *  │  │ [hint]                                                               │
 *  │  └──────────────────────────────────────────────────────────────────── │
 *  └────────────────────────────────────────────────────────────────────────┘
 *
 * Mobile (≤768px): sidebar becomes a slide-in overlay triggered by ☰ button.
 */

/* ── Design tokens ───────────────────────────────────────────────────────── */
:root {
    --sidebar-width: 260px;
    --color-bg:         #0d1117;
    --color-surface:    #161b22;
    --color-border:     #21262d;
    --color-border-sub: #30363d;
    --color-text:       #c9d1d9;
    --color-text-muted: #8b949e;
    --color-text-dim:   #6e7681;
    --color-blue:       #58a6ff;
    --color-orange:     #f0883e;
    --color-green:      #56d364;
    --color-green-dark: #238636;
    --color-red:        #f85149;
}

/* ── Reset ───────────────────────────────────────────────────────────────── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    background: var(--color-bg);
    color: var(--color-text);
    height: 100vh;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

/* ── Header ──────────────────────────────────────────────────────────────── */
header {
    padding: 0 1rem;
    height: 44px;
    background: var(--color-surface);
    border-bottom: 1px solid var(--color-border);
    font-size: 0.92rem;
    font-weight: 700;
    color: var(--color-blue);
    flex-shrink: 0;
    display: flex;
    align-items: center;
    gap: 0.6rem;
}

/* Hamburger toggle — only shown on mobile */
#sidebar-toggle {
    background: none;
    border: none;
    color: var(--color-text-muted);
    font-size: 1.15rem;
    cursor: pointer;
    padding: 0.25rem 0.4rem;
    border-radius: 4px;
    line-height: 1;
    display: none;           /* hidden on desktop */
    flex-shrink: 0;
    transition: color 0.15s, background 0.15s;
}
#sidebar-toggle:hover { color: var(--color-text); background: var(--color-border); }

/* ── Mobile backdrop (darkens page behind open sidebar) ─────────────────── */
#sidebar-backdrop {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.55);
    z-index: 99;
}
#sidebar-backdrop.visible { display: block; }

/* ── App shell ───────────────────────────────────────────────────────────── */
#app {
    display: flex;
    flex: 1;
    overflow: hidden;
    position: relative;
}

/* ══════════════════════════════════════════════════════════════════════════ */
/* SIDEBAR                                                                    */
/* ══════════════════════════════════════════════════════════════════════════ */
#sidebar {
    width: var(--sidebar-width);
    flex-shrink: 0;
    background: var(--color-surface);
    border-right: 1px solid var(--color-border);
    overflow-y: auto;
    padding: 0.75rem 0 0;
    display: flex;
    flex-direction: column;
    /* smooth resize for mobile open/close */
    transition: transform 0.25s ease;
}

/* Section group ─────────────────────────────────────────────────────────── */
.nav-group { padding-bottom: 0.25rem; }

.nav-group-header {
    display: flex;
    align-items: flex-start;
    gap: 0.5rem;
    padding: 0.55rem 0.75rem 0.3rem;
}

/* Numbered badge "01", "02" */
.nav-group-badge {
    font-size: 0.65rem;
    font-weight: 700;
    font-family: "Fira Code", monospace;
    color: var(--color-surface);
    background: var(--color-orange);
    border-radius: 3px;
    padding: 0.05rem 0.3rem;
    flex-shrink: 0;
    line-height: 1.5;
    margin-top: 1px;
}

.nav-group-title {
    font-size: 0.72rem;
    font-weight: 700;
    letter-spacing: 0.03em;
    text-transform: uppercase;
    color: var(--color-text-muted);
    line-height: 1.4;
}

/* Nav items ─────────────────────────────────────────────────────────────── */
.nav-item {
    display: block;
    width: 100%;
    text-align: left;
    background: none;
    border: none;
    border-left: 2px solid transparent;
    color: var(--color-text-dim);
    font-size: 0.78rem;
    padding: 0.3rem 0.75rem 0.3rem 1.25rem;
    cursor: pointer;
    line-height: 1.5;
    white-space: normal;
    word-break: break-word;
    transition: color 0.12s, background 0.12s, border-color 0.12s;
}
.nav-item:hover {
    color: var(--color-text);
    background: #1c2333;
    border-left-color: var(--color-border-sub);
}
.nav-item.active {
    color: var(--color-blue);
    font-weight: 600;
    border-left-color: var(--color-blue);
    background: #1c2333;
}

/* Section divider */
.nav-divider {
    border: none;
    border-top: 1px solid var(--color-border);
    margin: 0.5rem 0.75rem;
}

/* Footer hint */
.sidebar-hint {
    margin-top: auto;
    padding: 0.6rem 0.75rem;
    font-size: 0.68rem;
    color: var(--color-border-sub);
    border-top: 1px solid var(--color-border);
    text-align: center;
}

/* ══════════════════════════════════════════════════════════════════════════ */
/* MAIN AREA                                                                  */
/* ══════════════════════════════════════════════════════════════════════════ */
#main {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    min-width: 0;   /* prevent flex child from overflowing parent */
}

/* Breadcrumb ──────────────────────────────────────────────────────────────  */
#breadcrumb {
    flex-shrink: 0;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0 1rem;
    height: 32px;
    background: var(--color-surface);
    border-bottom: 1px solid var(--color-border);
    font-size: 0.75rem;
    overflow: hidden;
}

#breadcrumb-section {
    color: var(--color-orange);
    font-weight: 600;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.breadcrumb-sep { color: var(--color-border-sub); flex-shrink: 0; }

#breadcrumb-demo {
    color: var(--color-text-muted);
    font-size: 0.7rem;
    white-space: nowrap;
    flex-shrink: 0;
    margin-left: auto;
    background: var(--color-border);
    padding: 0.1rem 0.5rem;
    border-radius: 999px;
}

/* Editor toolbar ────────────────────────────────────────────────────────── */
#editor-toolbar {
    flex-shrink: 0;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.4rem 0.75rem;
    background: #0d1117;
    border-bottom: 1px solid var(--color-border);
}

/* Shared button base */
#editor-toolbar button {
    border: none;
    border-radius: 5px;
    font-size: 0.78rem;
    font-weight: 600;
    padding: 0.3rem 0.75rem;
    cursor: pointer;
    transition: opacity 0.15s, filter 0.15s;
}
#editor-toolbar button:hover { filter: brightness(1.15); }
#editor-toolbar button:active { filter: brightness(0.9); }

/* ▶ Run — green */
#btn-run {
    background: var(--color-green-dark);
    color: #fff;
}

/* ↺ Reset — subtle */
#btn-reset {
    background: var(--color-border);
    color: var(--color-text-muted);
}

/* Keyboard shortcut hint */
.toolbar-hint {
    font-size: 0.68rem;
    color: var(--color-border-sub);
    margin-left: auto;
    white-space: nowrap;
}

/* Monaco container — fills all remaining vertical space ─────────────────── */
#editor-container {
    flex: 1;
    min-height: 0;   /* required for flex shrink to work */
    overflow: hidden;
}

/* ══════════════════════════════════════════════════════════════════════════ */
/* OUTPUT PANEL                                                               */
/* ══════════════════════════════════════════════════════════════════════════ */
#output-panel {
    flex-shrink: 0;
    background: #0a0e14;
    border-top: 2px solid var(--color-green-dark);
    padding: 0.6rem 1rem 0.75rem;
    display: flex;
    flex-direction: column;
    gap: 0.3rem;
    min-height: 72px;
    max-height: 140px;
    overflow-y: auto;
}

.output-label {
    font-size: 0.62rem;
    font-weight: 700;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    flex-shrink: 0;
    /* Default = EXPECTED OUTPUT — shown when a demo is selected */
    color: var(--color-text-muted);
}
/* ▶ RUN OUTPUT — shown after clicking Run */
.output-label.run   { color: var(--color-green-dark); }
/* ✗ ERROR — shown when eval throws */
.output-label.error { color: var(--color-red); }

#output-text {
    font-family: "Fira Code", "Cascadia Code", monospace;
    font-size: 0.82rem;
    color: var(--color-green);
    line-height: 1.6;
    white-space: pre-wrap;
    word-break: break-word;
}

/* ══════════════════════════════════════════════════════════════════════════ */
/* MOBILE (≤ 768px)                                                           */
/* ══════════════════════════════════════════════════════════════════════════ */
@media (max-width: 768px) {
    /* Show the hamburger button */
    #sidebar-toggle { display: block; }

    /* Sidebar becomes a fixed overlay that slides in from the left */
    #sidebar {
        position: fixed;
        top: 44px;      /* below header */
        left: 0;
        bottom: 0;
        z-index: 100;
        transform: translateX(-100%);
        box-shadow: 4px 0 16px rgba(0,0,0,0.5);
    }
    #sidebar.open { transform: translateX(0); }

    /* Hide keyboard shortcut hint — not relevant on mobile */
    .toolbar-hint { display: none; }

    /* Slightly larger tap targets */
    .nav-item { padding-top: 0.45rem; padding-bottom: 0.45rem; }
}
