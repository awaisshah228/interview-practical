{
  "id": "location",
  "title": "JS Window Location",
  "group": "JS Window",
  "content": [
    { "type": "h1", "text": "JavaScript Window Location" },
    { "type": "p", "text": "The window.location object contains information about the current URL and provides methods to navigate to new pages. It can be used to get URL parts, redirect the browser, and reload the page." },

    { "type": "h2", "text": "Location Properties" },
    { "type": "p", "text": "The location object has properties for each part of the URL. These allow you to read and set different parts of the current page's URL." },
    { "type": "table", "rows": [
      ["Property", "Description", "Example"],
      ["location.href", "Full URL", "https://example.com:8080/path?q=1#top"],
      ["location.protocol", "Protocol", "https:"],
      ["location.hostname", "Domain name", "example.com"],
      ["location.port", "Port number", "8080"],
      ["location.host", "hostname:port", "example.com:8080"],
      ["location.pathname", "Path", "/path"],
      ["location.search", "Query string", "?q=1"],
      ["location.hash", "Fragment", "#top"],
      ["location.origin", "Protocol + host", "https://example.com:8080"]
    ]},
    { "type": "example", "title": "Reading Location Properties", "code": [
      "// Reading current location properties",
      "console.log('href: ' + window.location.href);",
      "console.log('protocol: ' + window.location.protocol);",
      "console.log('hostname: ' + window.location.hostname);",
      "console.log('pathname: ' + window.location.pathname);",
      "console.log('search: ' + window.location.search);",
      "console.log('hash: ' + window.location.hash);",
      "",
      "// Parsing a URL",
      "const url = new URL('https://example.com:8080/path?name=Alice&age=30#section');",
      "console.log('\\nParsed URL:');",
      "console.log('hostname: ' + url.hostname);",
      "console.log('pathname: ' + url.pathname);",
      "console.log('port: ' + url.port);",
      "console.log('search: ' + url.search);",
      "console.log('hash: ' + url.hash);"
    ]},

    { "type": "h2", "text": "Parsing Query Parameters" },
    { "type": "p", "text": "The URLSearchParams API provides an easy way to parse and manipulate query string parameters from the location.search property." },
    { "type": "example", "title": "Working with Query Parameters", "code": [
      "// Parse query parameters",
      "const params = new URLSearchParams('?name=Alice&age=30&city=NYC');",
      "",
      "console.log('name: ' + params.get('name'));",
      "console.log('age: ' + params.get('age'));",
      "console.log('city: ' + params.get('city'));",
      "console.log('missing: ' + params.get('missing'));",
      "",
      "// Check if parameter exists",
      "console.log('has name: ' + params.has('name'));",
      "console.log('has email: ' + params.has('email'));",
      "",
      "// Iterate all parameters",
      "console.log('\\nAll params:');",
      "params.forEach(function(value, key) {",
      "  console.log('  ' + key + ' = ' + value);",
      "});"
    ]},

    { "type": "h2", "text": "location.assign()" },
    { "type": "p", "text": "location.assign() loads a new document. It adds the new page to the browser history, so the user can use the back button to return to the previous page." },
    { "type": "example", "title": "Navigation with assign()", "code": [
      "// Navigate to a new page (adds to history)",
      "// window.location.assign('https://example.com/new-page');",
      "",
      "// Same as setting href:",
      "// window.location.href = 'https://example.com/new-page';",
      "",
      "// Same as:",
      "// window.location = 'https://example.com/new-page';",
      "",
      "console.log('location.assign(url):');",
      "console.log('  - Loads a new page');",
      "console.log('  - Adds to browser history');",
      "console.log('  - User can click Back');",
      "",
      "console.log('\\nEquivalent methods:');",
      "console.log('  location.assign(url)');",
      "console.log('  location.href = url');",
      "console.log('  location = url');"
    ]},

    { "type": "h2", "text": "location.replace()" },
    { "type": "p", "text": "location.replace() replaces the current page with a new one. Unlike assign(), it does NOT add to the browser history, so the user cannot use the back button to return." },
    { "type": "example", "title": "Navigation with replace()", "code": [
      "// Replace current page (no history entry)",
      "// window.location.replace('https://example.com/new-page');",
      "",
      "console.log('location.replace(url):');",
      "console.log('  - Loads a new page');",
      "console.log('  - Does NOT add to history');",
      "console.log('  - User CANNOT click Back');",
      "console.log('  - Used for redirects after login/logout');",
      "",
      "console.log('\\nassign() vs replace():');",
      "console.log('  assign  -> Back button works');",
      "console.log('  replace -> Back button skips this page');"
    ]},

    { "type": "h2", "text": "location.reload()" },
    { "type": "p", "text": "location.reload() reloads the current page from the server or cache." },
    { "type": "example", "title": "Reloading the Page", "code": [
      "// Reload the current page",
      "// window.location.reload();",
      "",
      "// Setting hash (does NOT reload the page)",
      "// window.location.hash = '#section2';",
      "",
      "console.log('location.reload():');",
      "console.log('  - Reloads the current page');",
      "console.log('  - May use cached version');",
      "",
      "console.log('\\nChanging hash:');",
      "console.log('  - location.hash = \"#new\"');",
      "console.log('  - Does NOT reload the page');",
      "console.log('  - Fires hashchange event');",
      "",
      "console.log('\\nChanging other properties:');",
      "console.log('  - location.search = \"?q=test\" -> reloads');",
      "console.log('  - location.pathname = \"/new\" -> reloads');"
    ]},

    { "type": "note", "text": "The window.location object can be used as both a getter and setter. Setting location.href to a new URL is functionally equivalent to calling location.assign(). For security, browsers restrict cross-origin access to location properties of other windows/frames." },

    { "type": "exercise", "question": "What is the difference between location.assign() and location.replace()?", "options": ["assign() is faster", "replace() does not add to browser history", "assign() only works with HTTPS", "There is no difference"], "answer": 1 }
  ]
}
