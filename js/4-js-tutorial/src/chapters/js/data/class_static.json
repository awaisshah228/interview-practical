{
  "id": "class_static",
  "title": "JS Class Static",
  "group": "JS Classes",
  "content": [
    { "type": "h1", "text": "JavaScript Class Static Methods and Properties" },
    { "type": "p", "text": "Static methods and properties belong to the class itself, not to instances of the class. They are called directly on the class and cannot be called on individual objects created from the class." },

    { "type": "h2", "text": "Static Methods" },
    { "type": "p", "text": "A static method is defined using the static keyword. Static methods are often used for utility functions that don't require object-specific data." },
    { "type": "example", "title": "Defining Static Methods", "code": [
      "class MathHelper {",
      "  static add(a, b) {",
      "    return a + b;",
      "  }",
      "",
      "  static multiply(a, b) {",
      "    return a * b;",
      "  }",
      "}",
      "",
      "// Call on the class, not an instance",
      "console.log(MathHelper.add(5, 3));",
      "console.log(MathHelper.multiply(4, 7));",
      "",
      "// This would throw an error:",
      "// const helper = new MathHelper();",
      "// helper.add(5, 3); // TypeError"
    ]},

    { "type": "h2", "text": "Static Properties" },
    { "type": "p", "text": "Static properties are class-level variables that are shared among all instances. They are useful for storing data that is common to all objects of a class, such as counters or configuration." },
    { "type": "example", "title": "Static Properties", "code": [
      "class User {",
      "  static count = 0;",
      "",
      "  constructor(name) {",
      "    this.name = name;",
      "    User.count++;",
      "  }",
      "",
      "  static getCount() {",
      "    return 'Total users: ' + User.count;",
      "  }",
      "}",
      "",
      "const u1 = new User('Alice');",
      "const u2 = new User('Bob');",
      "const u3 = new User('Charlie');",
      "",
      "console.log(User.getCount());",
      "console.log(User.count);"
    ]},

    { "type": "h2", "text": "When to Use Static" },
    { "type": "p", "text": "Use static methods when the logic does not depend on instance data. Common use cases include factory methods, utility/helper functions, caching, and configuration." },
    { "type": "example", "title": "Factory Method Pattern", "code": [
      "class Product {",
      "  constructor(name, price) {",
      "    this.name = name;",
      "    this.price = price;",
      "  }",
      "",
      "  static fromJSON(json) {",
      "    const data = JSON.parse(json);",
      "    return new Product(data.name, data.price);",
      "  }",
      "",
      "  describe() {",
      "    return this.name + ': $' + this.price;",
      "  }",
      "}",
      "",
      "const json = '{\"name\": \"Laptop\", \"price\": 999}';",
      "const laptop = Product.fromJSON(json);",
      "console.log(laptop.describe());",
      "console.log(laptop instanceof Product);"
    ]},

    { "type": "h2", "text": "Math as an Example of Static Methods" },
    { "type": "p", "text": "The built-in Math object is a great example of static methods in JavaScript. All Math methods are called directly on Math, not on an instance." },
    { "type": "example", "title": "Built-in Static Methods (Math)", "code": [
      "// Math methods are all static",
      "console.log(Math.round(4.7));",
      "console.log(Math.floor(4.9));",
      "console.log(Math.ceil(4.1));",
      "console.log(Math.max(10, 20, 30));",
      "console.log(Math.min(10, 20, 30));",
      "console.log(Math.sqrt(64));",
      "",
      "// You cannot create an instance of Math",
      "// const m = new Math(); // TypeError"
    ]},

    { "type": "h2", "text": "Static vs Instance and Private Fields" },
    { "type": "p", "text": "Understanding the difference between static and instance members is crucial. Additionally, JavaScript supports private fields using the # prefix, which restricts access to within the class." },
    { "type": "table", "rows": [
      ["Feature", "Static", "Instance"],
      ["Belongs to", "The class itself", "Each object"],
      ["Access", "ClassName.method()", "object.method()"],
      ["'this' refers to", "The class", "The instance"],
      ["Inherited", "Yes (by child class)", "Yes (by child instances)"],
      ["Use case", "Utility functions, factories", "Object-specific behavior"]
    ]},
    { "type": "example", "title": "Private Fields with #", "code": [
      "class BankAccount {",
      "  #balance = 0;",
      "",
      "  constructor(owner, initialBalance) {",
      "    this.owner = owner;",
      "    this.#balance = initialBalance;",
      "  }",
      "",
      "  deposit(amount) {",
      "    this.#balance += amount;",
      "    return this.#balance;",
      "  }",
      "",
      "  getBalance() {",
      "    return this.#balance;",
      "  }",
      "}",
      "",
      "const account = new BankAccount('Alice', 1000);",
      "console.log(account.owner);",
      "console.log(account.getBalance());",
      "account.deposit(500);",
      "console.log(account.getBalance());",
      "// console.log(account.#balance); // SyntaxError: Private field"
    ]},

    { "type": "note", "text": "Static methods cannot access instance properties using 'this'. Inside a static method, 'this' refers to the class itself, not an instance. Private fields (#) are truly private and cannot be accessed from outside the class, unlike the old convention of prefixing with an underscore (_)." },

    { "type": "exercise", "question": "How do you call a static method named 'create' on a class named 'Item'?", "options": ["new Item().create()", "Item.create()", "this.create()", "Item.prototype.create()"], "answer": 1 }
  ]
}
