{
  "id": "scheduling_publishing",
  "title": "Scheduling & Auto-Publishing",
  "group": "AI Automation",
  "content": [
    { "type": "h1", "text": "Scheduling & Auto-Publishing" },
    { "type": "image", "src": "https://placehold.co/800x450/1a1a2e/04AA6D?text=Auto+Publishing&font=raleway", "alt": "Content calendar with automated publishing across multiple platforms", "caption": "Automated scheduling publishes your AI-generated videos at optimal times across all platforms" },
    { "type": "h2", "text": "Why Automate Publishing?" },
    { "type": "p", "text": "Generating videos is only half the battle. If you produce 10 videos per day but upload them manually, the publishing step becomes the bottleneck. <strong>Auto-publishing</strong> closes the loop — your pipeline generates content and delivers it to audiences without human intervention." },
    { "type": "p", "text": "Automated publishing ensures videos go live at the <strong>optimal time for each platform</strong>, with complete metadata (titles, descriptions, tags, thumbnails), correct privacy settings, and cross-platform distribution — all without you touching a single upload form." },
    { "type": "h2", "text": "Content Calendar Automation" },
    { "type": "p", "text": "A content calendar defines <strong>what gets published, when, and where</strong>. In an automated system, the calendar is a data source (Google Sheet, Notion database, or JSON file) that the pipeline reads to determine today's production queue." },
    { "type": "example", "title": "Content Calendar as a Google Sheet Data Source", "code": "// Google Sheet columns:\n// | Date       | Topic               | Platform  | Time  | Status    |\n// | 2025-07-14 | AI Video Trends     | YouTube   | 14:00 | pending   |\n// | 2025-07-14 | Quick AI Tips #42   | TikTok    | 09:00 | pending   |\n// | 2025-07-14 | AI Video Trends     | Instagram | 18:00 | pending   |\n\nconst getCalendarEntries = async (date) => {\n  const sheets = google.sheets({ version: 'v4', auth });\n  const response = await sheets.spreadsheets.values.get({\n    spreadsheetId: SHEET_ID,\n    range: 'Calendar!A:E'\n  });\n  const rows = response.data.values;\n  return rows\n    .filter(row => row[0] === date && row[4] === 'pending')\n    .map(row => ({\n      date: row[0],\n      topic: row[1],\n      platform: row[2],\n      time: row[3],\n      status: row[4]\n    }));\n};" },
    { "type": "image", "src": "https://placehold.co/800x450/1a1a2e/04AA6D?text=Calendar+Workflow&font=raleway", "alt": "Automated content calendar workflow showing data flow from spreadsheet to pipeline to platforms", "caption": "The calendar drives the pipeline: each row becomes a video production job" },
    { "type": "h2", "text": "YouTube API Auto-Upload" },
    { "type": "p", "text": "YouTube's Data API v3 allows full programmatic control over video uploads, including setting titles, descriptions, tags, thumbnails, playlists, scheduling, and monetization settings." },
    { "type": "note", "text": "YouTube API requires OAuth 2.0 authentication with a verified Google Cloud project. You need the youtube.upload scope. The API has a daily quota of 10,000 units — each video upload costs 1,600 units, allowing approximately 6 uploads per day with the default quota." },
    { "type": "example", "title": "Complete YouTube Upload with Metadata", "code": "const uploadToYouTube = async (videoFile, thumbnailFile, metadata) => {\n  const youtube = google.youtube({ version: 'v3', auth: oauthClient });\n\n  // Step 1: Upload the video\n  const videoResponse = await youtube.videos.insert({\n    part: 'snippet,status,contentDetails',\n    requestBody: {\n      snippet: {\n        title: metadata.title,           // Max 100 characters\n        description: metadata.description, // Max 5000 characters\n        tags: metadata.tags,              // Array of strings\n        categoryId: '28',                 // Science & Technology\n        defaultLanguage: 'en',\n        defaultAudioLanguage: 'en'\n      },\n      status: {\n        privacyStatus: 'private',         // Start private, schedule public\n        publishAt: metadata.publishAt,     // ISO 8601: '2025-07-14T14:00:00Z'\n        selfDeclaredMadeForKids: false,\n        license: 'youtube',\n        embeddable: true\n      }\n    },\n    media: {\n      body: fs.createReadStream(videoFile)\n    }\n  });\n\n  const videoId = videoResponse.data.id;\n\n  // Step 2: Set custom thumbnail\n  await youtube.thumbnails.set({\n    videoId: videoId,\n    media: {\n      body: fs.createReadStream(thumbnailFile)\n    }\n  });\n\n  // Step 3: Add to playlist\n  await youtube.playlistItems.insert({\n    part: 'snippet',\n    requestBody: {\n      snippet: {\n        playlistId: metadata.playlistId,\n        resourceId: {\n          kind: 'youtube#video',\n          videoId: videoId\n        }\n      }\n    }\n  });\n\n  return { videoId, url: `https://youtube.com/watch?v=${videoId}` };\n};" },
    { "type": "h2", "text": "Social Media Scheduling" },
    { "type": "p", "text": "Each social media platform has different API capabilities, posting requirements, and optimal formats. A multi-platform publishing system must adapt the same content for each destination." },
    { "type": "table", "rows": [
      ["Platform", "API Available", "Max Video Length", "Optimal Dimensions", "Best Post Time (General)"],
      ["YouTube", "Yes (Data API v3)", "12 hours", "1920x1080 (16:9)", "2-4 PM weekdays"],
      ["TikTok", "Yes (Content Posting API)", "10 minutes", "1080x1920 (9:16)", "7-9 PM daily"],
      ["Instagram Reels", "Yes (Graph API)", "90 seconds", "1080x1920 (9:16)", "11 AM - 1 PM, 7-9 PM"],
      ["X (Twitter)", "Yes (v2 API)", "2 min 20 sec", "1920x1080 or 1080x1920", "9 AM, 12 PM weekdays"],
      ["LinkedIn", "Yes (Marketing API)", "10 minutes", "1920x1080 (16:9)", "8-10 AM Tue-Thu"],
      ["Facebook", "Yes (Graph API)", "240 minutes", "1920x1080 (16:9)", "1-4 PM weekdays"]
    ]},
    { "type": "h2", "text": "TikTok Auto-Publishing" },
    { "type": "p", "text": "TikTok's Content Posting API allows direct video uploads from your server. The process involves initializing an upload, sending the video file, and then publishing with metadata." },
    { "type": "example", "title": "TikTok Content Posting API", "code": "// Step 1: Initialize the upload\nconst initResponse = await fetch('https://open.tiktokapis.com/v2/post/publish/video/init/', {\n  method: 'POST',\n  headers: {\n    'Authorization': `Bearer ${TIKTOK_ACCESS_TOKEN}`,\n    'Content-Type': 'application/json'\n  },\n  body: JSON.stringify({\n    post_info: {\n      title: 'AI Video Generation Tips #aitools #ai',\n      privacy_level: 'PUBLIC_TO_EVERYONE',\n      disable_duet: false,\n      disable_comment: false,\n      disable_stitch: false\n    },\n    source_info: {\n      source: 'FILE_UPLOAD',\n      video_size: fileSize,\n      chunk_size: fileSize,\n      total_chunk_count: 1\n    }\n  })\n});\n\nconst { upload_url, publish_id } = await initResponse.json();\n\n// Step 2: Upload the video file\nawait fetch(upload_url, {\n  method: 'PUT',\n  headers: {\n    'Content-Range': `bytes 0-${fileSize - 1}/${fileSize}`,\n    'Content-Type': 'video/mp4'\n  },\n  body: fs.createReadStream(videoPath)\n});\n\n// Step 3: Check publish status\nconst statusResponse = await fetch(\n  `https://open.tiktokapis.com/v2/post/publish/status/fetch/`,\n  {\n    method: 'POST',\n    headers: { 'Authorization': `Bearer ${TIKTOK_ACCESS_TOKEN}` },\n    body: JSON.stringify({ publish_id })\n  }\n);" },
    { "type": "h2", "text": "Instagram Reels Publishing" },
    { "type": "p", "text": "Instagram requires videos to be hosted at a publicly accessible URL before publishing via the Graph API. The flow is: host the video, create a media container, then publish it." },
    { "type": "example", "title": "Instagram Reels via Graph API", "code": "// Step 1: Create media container (video must be at a public URL)\nconst containerResponse = await fetch(\n  `https://graph.facebook.com/v18.0/${IG_USER_ID}/media`,\n  {\n    method: 'POST',\n    body: new URLSearchParams({\n      media_type: 'REELS',\n      video_url: publicVideoUrl,\n      caption: 'How AI generates videos automatically! #aiautomation #aivideo',\n      share_to_feed: 'true',\n      access_token: IG_ACCESS_TOKEN\n    })\n  }\n);\nconst { id: containerId } = await containerResponse.json();\n\n// Step 2: Wait for processing (poll status)\nlet status = 'IN_PROGRESS';\nwhile (status === 'IN_PROGRESS') {\n  await sleep(10000);\n  const check = await fetch(\n    `https://graph.facebook.com/v18.0/${containerId}?fields=status_code&access_token=${IG_ACCESS_TOKEN}`\n  );\n  status = (await check.json()).status_code;\n}\n\n// Step 3: Publish\nawait fetch(\n  `https://graph.facebook.com/v18.0/${IG_USER_ID}/media_publish`,\n  {\n    method: 'POST',\n    body: new URLSearchParams({\n      creation_id: containerId,\n      access_token: IG_ACCESS_TOKEN\n    })\n  }\n);" },
    { "type": "h2", "text": "Optimal Posting Times by Platform" },
    { "type": "p", "text": "Posting at the right time can increase initial engagement by 30-50%. While optimal times vary by audience, research-backed general guidelines exist for each platform." },
    { "type": "image", "src": "https://placehold.co/800x450/1a1a2e/04AA6D?text=Optimal+Posting+Times&font=raleway", "alt": "Heatmap showing optimal posting times for YouTube, TikTok, Instagram, and X across the week", "caption": "Optimal posting times vary by platform — schedule accordingly for maximum initial engagement" },
    { "type": "table", "rows": [
      ["Platform", "Best Days", "Best Times (EST)", "Worst Times", "Why"],
      ["YouTube", "Thu-Sat", "2-4 PM", "Mon morning", "Viewers browse after work/school"],
      ["TikTok", "Tue-Thu", "7-9 PM", "Early morning", "Peak scroll time in evenings"],
      ["Instagram", "Tue, Wed, Fri", "11 AM - 1 PM", "Late night (11PM-5AM)", "Lunch break browsing + evening wind-down"],
      ["X (Twitter)", "Mon-Fri", "9 AM, 12 PM", "Weekends", "Work-hours engagement pattern"],
      ["LinkedIn", "Tue-Thu", "8-10 AM", "Fri afternoon, weekends", "Professional morning routine"],
      ["Facebook", "Wed-Fri", "1-4 PM", "Early morning, late night", "Afternoon break browsing"]
    ]},
    { "type": "note", "text": "These are general guidelines. Use your own analytics data (YouTube Studio, TikTok Analytics, Instagram Insights) to find the optimal posting times for YOUR specific audience. Automate the analysis by pulling analytics data via APIs." },
    { "type": "h2", "text": "Metadata Automation" },
    { "type": "p", "text": "Metadata — titles, descriptions, tags, and hashtags — is critical for discoverability. AI can generate optimized metadata automatically based on the video's script and target audience." },
    { "type": "example", "title": "AI-Generated Metadata via GPT", "code": "const generateMetadata = async (script, platform) => {\n  const response = await openai.chat.completions.create({\n    model: 'gpt-4',\n    messages: [\n      {\n        role: 'system',\n        content: `You are a ${platform} SEO expert. Generate optimized metadata for a video based on its script. Return JSON with: title (max 100 chars), description (max 5000 chars for YouTube, 2200 for Instagram), tags (array of 15-30 keywords), hashtags (array of 5-10 for social platforms).`\n      },\n      {\n        role: 'user',\n        content: `Platform: ${platform}\\nScript:\\n${script}`\n      }\n    ],\n    response_format: { type: 'json_object' }\n  });\n  return JSON.parse(response.choices[0].message.content);\n};\n\n// Generate platform-specific metadata\nconst ytMeta = await generateMetadata(script, 'YouTube');\nconst tiktokMeta = await generateMetadata(script, 'TikTok');\nconst igMeta = await generateMetadata(script, 'Instagram Reels');" },
    { "type": "h2", "text": "Thumbnail Generation Automation" },
    { "type": "p", "text": "Thumbnails are the single biggest factor in click-through rate. Automated thumbnail generation uses AI image generation combined with text overlay to produce eye-catching thumbnails at scale." },
    { "type": "example", "title": "Automated Thumbnail Pipeline", "code": "const generateThumbnail = async (videoTitle, keyFrame) => {\n  // Step 1: Generate background image with DALL-E\n  const bgImage = await openai.images.generate({\n    model: 'dall-e-3',\n    prompt: `YouTube thumbnail background: ${videoTitle}. Bold, vibrant, high-contrast, eye-catching, no text. 16:9 aspect ratio.`,\n    size: '1792x1024',\n    quality: 'hd'\n  });\n\n  // Step 2: Generate click-worthy title text with GPT\n  const titleText = await openai.chat.completions.create({\n    model: 'gpt-4',\n    messages: [{\n      role: 'user',\n      content: `Write a SHORT (3-5 words max) YouTube thumbnail text for: \"${videoTitle}\". Make it dramatic, curiosity-driven. Examples: \"This Changes Everything\", \"AI Can Do WHAT?\", \"You Won't Believe This\"`\n    }]\n  });\n\n  // Step 3: Overlay text on image using Sharp + Canvas\n  const thumbnail = await sharp(bgImageBuffer)\n    .composite([\n      { input: textOverlayBuffer, gravity: 'center' },\n      { input: brandLogoBuffer, gravity: 'southeast' }\n    ])\n    .resize(1280, 720)   // YouTube thumbnail standard size\n    .jpeg({ quality: 95 })\n    .toBuffer();\n\n  return thumbnail;\n};" },
    { "type": "note", "text": "Always generate 3-5 thumbnail variants per video for A/B testing. YouTube allows you to change thumbnails after publishing, so you can test which performs best and swap accordingly." },
    { "type": "exercise", "question": "How many YouTube API upload units does a single video upload consume from the daily quota?", "options": ["100 units", "500 units", "1,600 units", "10,000 units"], "answer": 2 },
    { "type": "exercise", "question": "Which platform requires videos to be hosted at a public URL before publishing via its API?", "options": ["YouTube", "TikTok", "Instagram", "X (Twitter)"], "answer": 2 },
    { "type": "exercise", "question": "What is the most effective way to determine optimal posting times for YOUR audience?", "options": ["Follow general guidelines from blog posts", "Post at random times and hope for the best", "Analyze your own platform analytics data via APIs", "Always post at 12 PM EST regardless of platform"], "answer": 2 }
  ]
}